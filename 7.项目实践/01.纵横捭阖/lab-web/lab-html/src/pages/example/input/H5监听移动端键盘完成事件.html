<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>ç§»åŠ¨ç«¯é”®ç›˜å®Œæˆäº‹ä»¶ç›‘å¬å®Œæ•´è§£å†³æ–¹æ¡ˆ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        header {
            background: linear-gradient(135deg, #3498db 0%, #2c3e50 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }
        
        h1 {
            font-size: 28px;
            margin-bottom: 10px;
        }
        
        .subtitle {
            font-size: 16px;
            opacity: 0.9;
        }
        
        .content {
            padding: 30px;
        }
        
        .method-section {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 30px;
            border-left: 5px solid #3498db;
        }
        
        .method-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .method-tag {
            background: #3498db;
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: bold;
        }
        
        .method-tag.recommended {
            background: #27ae60;
        }
        
        .method-tag.advanced {
            background: #9b59b6;
        }
        
        .demo-area {
            border: 2px solid #e9ecef;
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
            background: white;
        }
        
        .input-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #2c3e50;
        }
        
        input, textarea, select {
            width: 100%;
            padding: 15px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            font-size: 16px;
            transition: all 0.3s;
        }
        
        input:focus, textarea:focus, select:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
        }
        
        .event-log {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            padding: 15px;
            margin-top: 20px;
            max-height: 300px;
            overflow-y: auto;
        }
        
        .log-entry {
            padding: 8px 0;
            border-bottom: 1px solid #eee;
            font-family: 'Courier New', monospace;
            font-size: 13px;
        }
        
        .log-entry:last-child {
            border-bottom: none;
        }
        
        .status-indicator {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #2c3e50;
            color: white;
            padding: 10px 20px;
            border-radius: 20px;
            font-size: 12px;
            z-index: 1000;
        }
        
        .compatibility-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: white;
            border-radius: 8px;
            overflow: hidden;
        }
        
        .compatibility-table th, .compatibility-table td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #eee;
        }
        
        .compatibility-table th {
            background: #f8f9fa;
            font-weight: 600;
        }
        
        .success {
            color: #27ae60;
            font-weight: bold;
        }
        
        .warning {
            color: #f39c12;
            font-weight: bold;
        }
        
        .error {
            color: #e74c3c;
            font-weight: bold;
        }
        
        .code-block {
            background: #2d2d2d;
            color: #f8f8f2;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            line-height: 1.5;
            overflow-x: auto;
            white-space: pre-wrap;
        }
        
        footer {
            text-align: center;
            padding: 20px;
            color: #666;
            font-size: 14px;
            border-top: 1px solid #eee;
        }
        
        .keyboard-type-selector {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 10px;
            margin: 20px 0;
        }
        
        .keyboard-type-btn {
            padding: 12px;
            background: #3498db;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
        }
        
        .keyboard-type-btn.active {
            background: #27ae60;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>ç§»åŠ¨ç«¯é”®ç›˜å®Œæˆäº‹ä»¶ç›‘å¬è§£å†³æ–¹æ¡ˆ</h1>
            <p class="subtitle">ç›‘å¬"å®Œæˆ"ã€"æœç´¢"ã€"å‘é€"ã€"å‰å¾€"ç­‰é”®ç›˜æ“ä½œæŒ‰é’®</p>
        </header>
        
        <div class="content">
            <!-- æ–¹æ³•1ï¼šenterkeyhint å±æ€§ç›‘å¬ -->
            <div class="method-section">
                <div class="method-header">
                    <h2>æ–¹æ³•1ï¼šä½¿ç”¨ enterkeyhint å±æ€§ + é”®ç›˜äº‹ä»¶</h2>
                    <span class="method-tag recommended">æ¨è</span>
                </div>
                <p>é€šè¿‡è®¾ç½® <code>enterkeyhint</code> å±æ€§æ§åˆ¶é”®ç›˜æŒ‰é’®ç±»å‹ï¼Œå¹¶ç›‘å¬ <code>keydown</code> äº‹ä»¶æ•è·å®Œæˆæ“ä½œã€‚</p>
                
                <div class="demo-area">
                    <div class="keyboard-type-selector">
                        <button class="keyboard-type-btn active" data-type="done">âœ… å®Œæˆ (done)</button>
                        <button class="keyboard-type-btn" data-type="search">ğŸ” æœç´¢ (search)</button>
                        <button class="keyboard-type-btn" data-type="send">ğŸ“¤ å‘é€ (send)</button>
                        <button class="keyboard-type-btn" data-type="go">ğŸš€ å‰å¾€ (go)</button>
                        <button class="keyboard-type-btn" data-type="next">â­ï¸ ä¸‹ä¸€ä¸ª (next)</button>
                        <button class="keyboard-type-btn" data-type="previous">â®ï¸ ä¸Šä¸€ä¸ª (previous)</button>
                    </div>
                    
                    <div class="input-group">
                        <label>è¾“å…¥æ¡† (enterkeyhint="done"):</label>
                        <input 
                            type="text" 
                            id="inputDone" 
                            enterkeyhint="done"
                            placeholder="è®¾ç½® enterkeyhint='done'ï¼ŒæŒ‰å®Œæˆé”®æµ‹è¯•"
                        >
                    </div>
                    
                    <div class="event-log" id="log1">
                        <div class="log-entry">äº‹ä»¶æ—¥å¿—ï¼š</div>
                    </div>
                </div>
                
                <div class="code-block">
// æ–¹æ³•1ï¼šenterkeyhint + é”®ç›˜äº‹ä»¶ç›‘å¬
class EnterKeyHintListener {
    constructor(inputId, logId) {
        this.input = document.getElementById(inputId);
        this.log = document.getElementById(logId);
        this.init();
    }
    
    init() {
        // ç›‘å¬é”®ç›˜æŒ‰ä¸‹äº‹ä»¶
        this.input.addEventListener('keydown', (e) => {
            this.handleKeyDown(e);
        });
        
        // ç›‘å¬é”®ç›˜æŠ¬èµ·äº‹ä»¶
        this.input.addEventListener('keyup', (e) => {
            this.handleKeyUp(e);
        });
        
        // ç›‘å¬è¾“å…¥äº‹ä»¶
        this.input.addEventListener('input', (e) => {
            this.logEvent('input', `è¾“å…¥: ${e.target.value}`);
        });
        
        // ç›‘å¬ç„¦ç‚¹äº‹ä»¶
        this.input.addEventListener('focus', () => {
            this.logEvent('focus', 'è·å¾—ç„¦ç‚¹');
        });
        
        this.input.addEventListener('blur', () => {
            this.logEvent('blur', 'å¤±å»ç„¦ç‚¹');
        });
    }
    
    handleKeyDown(e) {
        // è®°å½•æ‰€æœ‰æŒ‰é”®
        this.logEvent('keydown', `æŒ‰é”®: ${e.key}, KeyCode: ${e.keyCode}`);
        
        // æ£€æŸ¥æ˜¯å¦æ˜¯å›è½¦é”®ï¼ˆå®ŒæˆæŒ‰é’®ï¼‰
        if (e.key === 'Enter' || e.keyCode === 13) {
            e.preventDefault(); // é˜»æ­¢é»˜è®¤è¡Œä¸ºï¼ˆå¦‚è¡¨å•æäº¤ï¼‰
            e.stopPropagation(); // é˜»æ­¢äº‹ä»¶å†’æ³¡
            
            this.logEvent('enter', 'å®Œæˆé”®è¢«æŒ‰ä¸‹ï¼');
            
            // æ ¹æ® enterkeyhint å€¼æ‰§è¡Œä¸åŒæ“ä½œ
            const hint = this.input.getAttribute('enterkeyhint') || 'done';
            this.handleEnterAction(hint);
            
            // æ¨¡æ‹Ÿå¤„ç†å®Œæˆ
            this.processCompletion();
        }
    }
    
    handleKeyUp(e) {
        if (e.key === 'Enter' || e.keyCode === 13) {
            this.logEvent('keyup', 'å®Œæˆé”®æŠ¬èµ·');
        }
    }
    
    handleEnterAction(hint) {
        const actions = {
            'done': 'å®Œæˆæ“ä½œ',
            'search': 'æœç´¢æ“ä½œ',
            'send': 'å‘é€æ“ä½œ',
            'go': 'å‰å¾€æ“ä½œ',
            'next': 'ä¸‹ä¸€ä¸ª',
            'previous': 'ä¸Šä¸€ä¸ª'
        };
        
        const action = actions[hint] || 'é»˜è®¤æ“ä½œ';
        this.logEvent('action', `æ‰§è¡Œ ${action} (hint=${hint})`);
    }
    
    processCompletion() {
        const value = this.input.value.trim();
        if (value) {
            this.logEvent('process', `å¤„ç†å†…å®¹: "${value}"`);
        }
        
        // å¯é€‰ï¼šå¤±å»ç„¦ç‚¹éšè—é”®ç›˜
        // setTimeout(() => this.input.blur(), 100);
    }
    
    logEvent(type, message) {
        const time = new Date().toLocaleTimeString();
        const entry = document.createElement('div');
        entry.className = 'log-entry';
        entry.innerHTML = `<strong>[${time}] ${type}:</strong> ${message}`;
        this.log.appendChild(entry);
        
        // è‡ªåŠ¨æ»šåŠ¨åˆ°åº•éƒ¨
        this.log.scrollTop = this.log.scrollHeight;
    }
}
                </div>
            </div>
            
            <!-- æ–¹æ³•2ï¼šè¡¨å• submit äº‹ä»¶ -->
            <div class="method-section">
                <div class="method-header">
                    <h2>æ–¹æ³•2ï¼šè¡¨å• submit äº‹ä»¶ç›‘å¬</h2>
                    <span class="method-tag recommended">æ ‡å‡†</span>
                </div>
                <p>å°†è¾“å…¥æ¡†æ”¾åœ¨ <code>&lt;form&gt;</code> ä¸­ï¼Œç›‘å¬è¡¨å•çš„ submit äº‹ä»¶ã€‚</p>
                
                <div class="demo-area">
                    <form id="demoForm">
                        <div class="input-group">
                            <label>æœç´¢æ¡† (åœ¨è¡¨å•ä¸­):</label>
                            <input 
                                type="search" 
                                id="searchInput"
                                enterkeyhint="search"
                                placeholder="è¾“å…¥å†…å®¹åæŒ‰æœç´¢é”®"
                            >
                        </div>
                    </form>
                    
                    <div class="event-log" id="log2">
                        <div class="log-entry">äº‹ä»¶æ—¥å¿—ï¼š</div>
                    </div>
                </div>
                
                <div class="code-block">
// æ–¹æ³•2ï¼šè¡¨å• submit äº‹ä»¶ç›‘å¬
class FormSubmitListener {
    constructor(formId, logId) {
        this.form = document.getElementById(formId);
        this.log = document.getElementById(logId);
        this.init();
    }
    
    init() {
        // ç›‘å¬è¡¨å•æäº¤äº‹ä»¶
        this.form.addEventListener('submit', (e) => {
            e.preventDefault(); // é˜»æ­¢é»˜è®¤æäº¤è¡Œä¸º
            this.handleFormSubmit(e);
        });
        
        // ä¹Ÿå¯ä»¥ç›‘å¬è¾“å…¥æ¡†çš„é”®ç›˜äº‹ä»¶
        const input = this.form.querySelector('input[type="search"]');
        input.addEventListener('keydown', (e) => {
            if (e.key === 'Enter' || e.keyCode === 13) {
                this.logEvent('keydown', 'æœç´¢é”®è¢«æŒ‰ä¸‹');
            }
        });
    }
    
    handleFormSubmit(e) {
        const input = this.form.querySelector('input[type="search"]');
        const value = input.value.trim();
        
        this.logEvent('submit', `è¡¨å•æäº¤ï¼Œæœç´¢å†…å®¹: "${value}"`);
        
        if (value) {
            // æ‰§è¡Œæœç´¢æ“ä½œ
            this.performSearch(value);
        }
        
        // æ¸…ç©ºè¾“å…¥æ¡†
        input.value = '';
        input.blur(); // éšè—é”®ç›˜
    }
    
    performSearch(query) {
        this.logEvent('search', `æ‰§è¡Œæœç´¢: "${query}"`);
        
        // æ¨¡æ‹Ÿæœç´¢å»¶è¿Ÿ
        setTimeout(() => {
            this.logEvent('result', `æ‰¾åˆ° ${Math.floor(Math.random() * 100)} ä¸ªç»“æœ`);
        }, 500);
    }
    
    logEvent(type, message) {
        const time = new Date().toLocaleTimeString();
        const entry = document.createElement('div');
        entry.className = 'log-entry';
        entry.innerHTML = `<strong>[${time}] ${type}:</strong> ${message}`;
        this.log.appendChild(entry);
        this.log.scrollTop = this.log.scrollHeight;
    }
}
                </div>
            </div>
            
            <!-- æ–¹æ³•3ï¼šinput äº‹ä»¶ + inputType æ£€æµ‹ -->
            <div class="method-section">
                <div class="method-header">
                    <h2>æ–¹æ³•3ï¼šinput äº‹ä»¶ + inputType æ£€æµ‹</h2>
                    <span class="method-tag">é«˜çº§</span>
                </div>
                <p>é€šè¿‡ <code>input</code> äº‹ä»¶çš„ <code>inputType</code> å±æ€§æ£€æµ‹æ’å…¥è¡Œæ“ä½œã€‚</p>
                
                <div class="demo-area">
                    <div class="input-group">
                        <label>å¤šè¡Œæ–‡æœ¬è¾“å…¥æ¡†:</label>
                        <textarea 
                            id="multilineInput"
                            rows="4"
                            enterkeyhint="send"
                            placeholder="è¾“å…¥å¤šè¡Œæ–‡æœ¬ï¼ŒæŒ‰å‘é€é”®æµ‹è¯•"
                        ></textarea>
                    </div>
                    
                    <div class="event-log" id="log3">
                        <div class="log-entry">äº‹ä»¶æ—¥å¿—ï¼š</div>
                    </div>
                </div>
                
                <div class="code-block">
// æ–¹æ³•3ï¼šinput äº‹ä»¶ + inputType æ£€æµ‹
class InputTypeListener {
    constructor(textareaId, logId) {
        this.textarea = document.getElementById(textareaId);
        this.log = document.getElementById(logId);
        this.init();
    }
    
    init() {
        // ç›‘å¬ input äº‹ä»¶
        this.textarea.addEventListener('input', (e) => {
            this.handleInput(e);
        });
        
        // ç›‘å¬é”®ç›˜äº‹ä»¶
        this.textarea.addEventListener('keydown', (e) => {
            this.handleKeyDown(e);
        });
        
        // ç›‘å¬ composition äº‹ä»¶ï¼ˆå¤„ç†ä¸­æ–‡è¾“å…¥æ³•ï¼‰
        this.textarea.addEventListener('compositionstart', () => {
            this.logEvent('composition', 'å¼€å§‹ä¸­æ–‡è¾“å…¥');
        });
        
        this.textarea.addEventListener('compositionend', () => {
            this.logEvent('composition', 'ç»“æŸä¸­æ–‡è¾“å…¥');
        });
    }
    
    handleInput(e) {
        const inputType = e.inputType;
        
        if (inputType === 'insertLineBreak') {
            // æ£€æµ‹åˆ°æ¢è¡Œç¬¦æ’å…¥
            this.logEvent('inputType', 'æ£€æµ‹åˆ°æ’å…¥è¡Œï¼ˆå¯èƒ½æ˜¯å®Œæˆé”®ï¼‰');
            this.handleSendAction();
        } else if (inputType === 'insertText') {
            // æ™®é€šæ–‡æœ¬è¾“å…¥
            this.logEvent('input', 'æ–‡æœ¬è¾“å…¥');
        }
    }
    
    handleKeyDown(e) {
        if (e.key === 'Enter' || e.keyCode === 13) {
            if (e.shiftKey) {
                // Shift+Enter æ¢è¡Œ
                this.logEvent('keydown', 'Shift+Enter: æ¢è¡Œ');
                return; // å…è®¸é»˜è®¤æ¢è¡Œè¡Œä¸º
            } else {
                // å•ç‹¬çš„ Enter é”®
                e.preventDefault();
                this.logEvent('keydown', 'Enter: å‘é€æ“ä½œ');
                this.handleSendAction();
            }
        }
    }
    
    handleSendAction() {
        const value = this.textarea.value.trim();
        if (value) {
            this.logEvent('send', `å‘é€å†…å®¹: "${value}"`);
            this.textarea.value = ''; // æ¸…ç©ºå†…å®¹
            this.textarea.blur(); // éšè—é”®ç›˜
        }
    }
    
    logEvent(type, message) {
        const time = new Date().toLocaleTimeString();
        const entry = document.createElement('div');
        entry.className = 'log-entry';
        entry.innerHTML = `<strong>[${time}] ${type}:</strong> ${message}`;
        this.log.appendChild(entry);
        this.log.scrollTop = this.log.scrollHeight;
    }
}
                </div>
            </div>
            
            <!-- æ–¹æ³•4ï¼šblur äº‹ä»¶æ£€æµ‹ -->
            <div class="method-section">
                <div class="method-header">
                    <h2>æ–¹æ³•4ï¼šblur äº‹ä»¶ + è¶…æ—¶æ£€æµ‹</h2>
                    <span class="method-tag">è¡¥å……æ–¹æ¡ˆ</span>
                </div>
                <p>é€šè¿‡æ£€æµ‹è¾“å…¥æ¡†å¤±å»ç„¦ç‚¹çš„æ—¶é—´å·®æ¥åˆ¤æ–­æ˜¯å¦æ˜¯ç‚¹å‡»å®Œæˆé”®ã€‚</p>
                
                <div class="demo-area">
                    <div class="input-group">
                        <label>é€šç”¨è¾“å…¥æ¡†:</label>
                        <input 
                            type="text" 
                            id="blurInput"
                            placeholder="è¾“å…¥å†…å®¹åç‚¹å‡»å®Œæˆé”®æˆ–ç‚¹å‡»å…¶ä»–åœ°æ–¹"
                        >
                    </div>
                    
                    <div class="event-log" id="log4">
                        <div class="log-entry">äº‹ä»¶æ—¥å¿—ï¼š</div>
                    </div>
                </div>
                
                <div class="code-block">
// æ–¹æ³•4ï¼šblur äº‹ä»¶æ£€æµ‹å®Œæˆæ“ä½œ
class BlurDetector {
    constructor(inputId, logId) {
        this.input = document.getElementById(inputId);
        this.log = document.getElementById(logId);
        this.lastKeyTime = 0;
        this.blurTimeout = null;
        this.init();
    }
    
    init() {
        // è®°å½•æœ€åä¸€æ¬¡æŒ‰é”®æ—¶é—´
        this.input.addEventListener('keydown', (e) => {
            this.lastKeyTime = Date.now();
            
            if (e.key === 'Enter' || e.keyCode === 13) {
                this.logEvent('keydown', 'æ£€æµ‹åˆ° Enter é”®æŒ‰ä¸‹');
            }
        });
        
        // ç›‘å¬ blur äº‹ä»¶
        this.input.addEventListener('blur', () => {
            this.handleBlur();
        });
        
        // ç›‘å¬ focus äº‹ä»¶
        this.input.addEventListener('focus', () => {
            this.logEvent('focus', 'è·å¾—ç„¦ç‚¹');
        });
    }
    
    handleBlur() {
        const now = Date.now();
        const timeDiff = now - this.lastKeyTime;
        
        // å¦‚æœè·ç¦»æœ€åä¸€æ¬¡æŒ‰é”®æ—¶é—´å¾ˆçŸ­ï¼ˆå°äº300msï¼‰ï¼Œå¯èƒ½æ˜¯ç‚¹å‡»äº†å®Œæˆé”®
        if (timeDiff < 300 && this.lastKeyTime > 0) {
            this.logEvent('blur', `å¯èƒ½æ˜¯å®Œæˆé”®æ“ä½œ (${timeDiff}ms)`);
            this.processCompletion();
        } else {
            this.logEvent('blur', 'æ™®é€šå¤±å»ç„¦ç‚¹');
        }
        
        // æ¸…é™¤è¶…æ—¶æ£€æµ‹
        if (this.blurTimeout) {
            clearTimeout(this.blurTimeout);
        }
        
        this.lastKeyTime = 0;
    }
    
    processCompletion() {
        const value = this.input.value.trim();
        if (value) {
            this.logEvent('complete', `å¤„ç†å®Œæˆ: "${value}"`);
        }
    }
    
    logEvent(type, message) {
        const time = new Date().toLocaleTimeString();
        const entry = document.createElement('div');
        entry.className = 'log-entry';
        entry.innerHTML = `<strong>[${time}] ${type}:</strong> ${message}`;
        this.log.appendChild(entry);
        this.log.scrollTop = this.log.scrollHeight;
    }
}
                </div>
            </div>
            
            <!-- å…¼å®¹æ€§è¡¨æ ¼ -->
            <div class="method-section">
                <h3>ğŸ“± å…¼å®¹æ€§è¡¨æ ¼</h3>
                <table class="compatibility-table">
                    <thead>
                        <tr>
                            <th>æ–¹æ³•</th>
                            <th>iOS Safari</th>
                            <th>Android Chrome</th>
                            <th>å¾®ä¿¡æµè§ˆå™¨</th>
                            <th>è¯´æ˜</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>enterkeyhint å±æ€§</td>
                            <td class="success">iOS 12+</td>
                            <td class="success">Chrome 68+</td>
                            <td class="warning">æœ‰é™æ”¯æŒ</td>
                            <td>æ§åˆ¶é”®ç›˜æŒ‰é’®ç±»å‹</td>
                        </tr>
                        <tr>
                            <td>keydown Enter äº‹ä»¶</td>
                            <td class="success">å…¨æ”¯æŒ</td>
                            <td class="success">å…¨æ”¯æŒ</td>
                            <td class="success">å…¨æ”¯æŒ</td>
                            <td>æœ€å¯é çš„æ£€æµ‹æ–¹æ³•</td>
                        </tr>
                        <tr>
                            <td>è¡¨å• submit äº‹ä»¶</td>
                            <td class="success">å…¨æ”¯æŒ</td>
                            <td class="success">å…¨æ”¯æŒ</td>
                            <td class="success">å…¨æ”¯æŒ</td>
                            <td>éœ€è¦åŒ…è£¹åœ¨ form ä¸­</td>
                        </tr>
                        <tr>
                            <td>inputType æ£€æµ‹</td>
                            <td class="warning">éƒ¨åˆ†æ”¯æŒ</td>
                            <td class="success">æ”¯æŒ</td>
                            <td class="warning">æœ‰é™æ”¯æŒ</td>
                            <td>å¯æ£€æµ‹æ’å…¥è¡Œæ“ä½œ</td>
                        </tr>
                        <tr>
                            <td>blur æ—¶é—´å·®æ£€æµ‹</td>
                            <td class="warning">ä¸å‡†ç¡®</td>
                            <td class="warning">ä¸å‡†ç¡®</td>
                            <td class="warning">ä¸å‡†ç¡®</td>
                            <td>ä½œä¸ºè¡¥å……æ–¹æ¡ˆ</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            
            <!-- æœ€ä½³å®è·µ -->
            <div class="method-section">
                <h3>ğŸ’¡ æœ€ä½³å®è·µå»ºè®®</h3>
                <div style="padding: 20px; background: #e8f4fd; border-radius: 8px;">
                    <h4>ç»„åˆä½¿ç”¨å¤šç§æ–¹æ³•ï¼š</h4>
                    <pre style="background: white; padding: 15px; border-radius: 5px; font-family: monospace;">
// ç»„åˆä½¿ç”¨ç¤ºä¾‹
function setupCompleteListener(input) {
    // 1. è®¾ç½® enterkeyhint
    input.setAttribute('enterkeyhint', 'send');
    
    // 2. ç›‘å¬ keydown Enter
    input.addEventListener('keydown', (e) => {
        if (e.key === 'Enter' && !e.shiftKey) {
            e.preventDefault();
            handleComplete();
        }
    });
    
    // 3. å¦‚æœæ˜¯ formï¼Œç›‘å¬ submit
    if (input.form) {
        input.form.addEventListener('submit', (e) => {
            e.preventDefault();
            handleComplete();
        });
    }
    
    // 4. ç›‘å¬ blur ä½œä¸ºè¡¥å……
    let lastKeyTime = 0;
    input.addEventListener('keydown', () => lastKeyTime = Date.now());
    input.addEventListener('blur', () => {
        if (Date.now() - lastKeyTime < 200) {
            handleComplete();
        }
    });
    
    function handleComplete() {
        console.log('å®Œæˆæ“ä½œ:', input.value);
        input.blur(); // éšè—é”®ç›˜
    }
}</pre>
                </div>
            </div>
        </div>
        
        <footer>
            <p>Â© 2023 ç§»åŠ¨ç«¯é”®ç›˜å®Œæˆäº‹ä»¶ç›‘å¬è§£å†³æ–¹æ¡ˆ | æ”¯æŒ iOS å’Œ Android è®¾å¤‡</p>
        </footer>
    </div>
    
    <div class="status-indicator" id="statusIndicator">
        çŠ¶æ€: å°±ç»ª
    </div>

    <script>
        // æ›´æ–°çŠ¶æ€
        function updateStatus(message) {
            const statusElement = document.getElementById('statusIndicator');
            if (statusElement) {
                statusElement.textContent = `çŠ¶æ€: ${message}`;
            }
        }
        
        // é”®ç›˜ç±»å‹é€‰æ‹©å™¨
        document.querySelectorAll('.keyboard-type-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                // ç§»é™¤æ‰€æœ‰ active
                document.querySelectorAll('.keyboard-type-btn').forEach(b => {
                    b.classList.remove('active');
                });
                
                // è®¾ç½®å½“å‰ active
                btn.classList.add('active');
                
                // æ›´æ–°è¾“å…¥æ¡†çš„ enterkeyhint
                const type = btn.dataset.type;
                const input = document.getElementById('inputDone');
                input.setAttribute('enterkeyhint', type);
                input.placeholder = `è®¾ç½® enterkeyhint='${type}'ï¼ŒæŒ‰å®Œæˆé”®æµ‹è¯•`;
                
                updateStatus(`å·²è®¾ç½®ä¸º ${type} æ¨¡å¼`);
            });
        });
        
        // æ–¹æ³•1ï¼šEnterKeyHintListener
        class EnterKeyHintListener {
            constructor(inputId, logId) {
                this.input = document.getElementById(inputId);
                this.log = document.getElementById(logId);
                this.init();
            }
            
            init() {
                // ç›‘å¬é”®ç›˜æŒ‰ä¸‹äº‹ä»¶
                this.input.addEventListener('keydown', (e) => {
                    this.handleKeyDown(e);
                });
                
                // ç›‘å¬é”®ç›˜æŠ¬èµ·äº‹ä»¶
                this.input.addEventListener('keyup', (e) => {
                    this.handleKeyUp(e);
                });
                
                // ç›‘å¬è¾“å…¥äº‹ä»¶
                this.input.addEventListener('input', (e) => {
                    this.logEvent('input', `è¾“å…¥: ${e.target.value}`);
                });
                
                // ç›‘å¬ç„¦ç‚¹äº‹ä»¶
                this.input.addEventListener('focus', () => {
                    this.logEvent('focus', 'è·å¾—ç„¦ç‚¹');
                });
                
                this.input.addEventListener('blur', () => {
                    this.logEvent('blur', 'å¤±å»ç„¦ç‚¹');
                });
            }
            
            handleKeyDown(e) {
                // è®°å½•æ‰€æœ‰æŒ‰é”®
                this.logEvent('keydown', `æŒ‰é”®: ${e.key}, KeyCode: ${e.keyCode}`);
                
                // æ£€æŸ¥æ˜¯å¦æ˜¯å›è½¦é”®ï¼ˆå®ŒæˆæŒ‰é’®ï¼‰
                if (e.key === 'Enter' || e.keyCode === 13) {
                    e.preventDefault();
                    e.stopPropagation();
                    
                    this.logEvent('enter', 'å®Œæˆé”®è¢«æŒ‰ä¸‹ï¼');
                    
                    const hint = this.input.getAttribute('enterkeyhint') || 'done';
                    this.handleEnterAction(hint);
                    
                    this.processCompletion();
                }
            }
            
            handleKeyUp(e) {
                if (e.key === 'Enter' || e.keyCode === 13) {
                    this.logEvent('keyup', 'å®Œæˆé”®æŠ¬èµ·');
                }
            }
            
            handleEnterAction(hint) {
                const actions = {
                    'done': 'å®Œæˆæ“ä½œ',
                    'search': 'æœç´¢æ“ä½œ',
                    'send': 'å‘é€æ“ä½œ',
                    'go': 'å‰å¾€æ“ä½œ',
                    'next': 'ä¸‹ä¸€ä¸ª',
                    'previous': 'ä¸Šä¸€ä¸ª'
                };
                
                const action = actions[hint] || 'é»˜è®¤æ“ä½œ';
                this.logEvent('action', `æ‰§è¡Œ ${action} (hint=${hint})`);
            }
            
            processCompletion() {
                const value = this.input.value.trim();
                if (value) {
                    this.logEvent('process', `å¤„ç†å†…å®¹: "${value}"`);
                }
            }
            
            logEvent(type, message) {
                const time = new Date().toLocaleTimeString();
                const entry = document.createElement('div');
                entry.className = 'log-entry';
                entry.innerHTML = `<strong>[${time}] ${type}:</strong> ${message}`;
                this.log.appendChild(entry);
                this.log.scrollTop = this.log.scrollHeight;
            }
        }
        
        // æ–¹æ³•2ï¼šFormSubmitListener
        class FormSubmitListener {
            constructor(formId, logId) {
                this.form = document.getElementById(formId);
                this.log = document.getElementById(logId);
                this.init();
            }
            
            init() {
                this.form.addEventListener('submit', (e) => {
                    e.preventDefault();
                    this.handleFormSubmit(e);
                });
                
                const input = this.form.querySelector('input[type="search"]');
                input.addEventListener('keydown', (e) => {
                    if (e.key === 'Enter' || e.keyCode === 13) {
                        this.logEvent('keydown', 'æœç´¢é”®è¢«æŒ‰ä¸‹');
                    }
                });
            }
            
            handleFormSubmit(e) {
                const input = this.form.querySelector('input[type="search"]');
                const value = input.value.trim();
                
                this.logEvent('submit', `è¡¨å•æäº¤ï¼Œæœç´¢å†…å®¹: "${value}"`);
                
                if (value) {
                    this.performSearch(value);
                }
                
                input.value = '';
                input.blur();
            }
            
            performSearch(query) {
                this.logEvent('search', `æ‰§è¡Œæœç´¢: "${query}"`);
                
                setTimeout(() => {
                    this.logEvent('result', `æ‰¾åˆ° ${Math.floor(Math.random() * 100)} ä¸ªç»“æœ`);
                }, 500);
            }
            
            logEvent(type, message) {
                const time = new Date().toLocaleTimeString();
                const entry = document.createElement('div');
                entry.className = 'log-entry';
                entry.innerHTML = `<strong>[${time}] ${type}:</strong> ${message}`;
                this.log.appendChild(entry);
                this.log.scrollTop = this.log.scrollHeight;
            }
        }
        
        // æ–¹æ³•3ï¼šInputTypeListener
        class InputTypeListener {
            constructor(textareaId, logId) {
                this.textarea = document.getElementById(textareaId);
                this.log = document.getElementById(logId);
                this.init();
            }
            
            init() {
                this.textarea.addEventListener('input', (e) => {
                    this.handleInput(e);
                });
                
                this.textarea.addEventListener('keydown', (e) => {
                    this.handleKeyDown(e);
                });
                
                this.textarea.addEventListener('compositionstart', () => {
                    this.logEvent('composition', 'å¼€å§‹ä¸­æ–‡è¾“å…¥');
                });
                
                this.textarea.addEventListener('compositionend', () => {
                    this.logEvent('composition', 'ç»“æŸä¸­æ–‡è¾“å…¥');
                });
            }
            
            handleInput(e) {
                const inputType = e.inputType;
                
                if (inputType === 'insertLineBreak') {
                    this.logEvent('inputType', 'æ£€æµ‹åˆ°æ’å…¥è¡Œï¼ˆå¯èƒ½æ˜¯å®Œæˆé”®ï¼‰');
                    this.handleSendAction();
                } else if (inputType === 'insertText') {
                    this.logEvent('input', 'æ–‡æœ¬è¾“å…¥');
                }
            }
            
            handleKeyDown(e) {
                if (e.key === 'Enter' || e.keyCode === 13) {
                    if (e.shiftKey) {
                        this.logEvent('keydown', 'Shift+Enter: æ¢è¡Œ');
                        return;
                    } else {
                        e.preventDefault();
                        this.logEvent('keydown', 'Enter: å‘é€æ“ä½œ');
                        this.handleSendAction();
                    }
                }
            }
            
            handleSendAction() {
                const value = this.textarea.value.trim();
                if (value) {
                    this.logEvent('send', `å‘é€å†…å®¹: "${value}"`);
                    this.textarea.value = '';
                    this.textarea.blur();
                }
            }
            
            logEvent(type, message) {
                const time = new Date().toLocaleTimeString();
                const entry = document.createElement('div');
                entry.className = 'log-entry';
                entry.innerHTML = `<strong>[${time}] ${type}:</strong> ${message}`;
                this.log.appendChild(entry);
                this.log.scrollTop = this.log.scrollHeight;
            }
        }
        
        // æ–¹æ³•4ï¼šBlurDetector
        class BlurDetector {
            constructor(inputId, logId) {
                this.input = document.getElementById(inputId);
                this.log = document.getElementById(logId);
                this.lastKeyTime = 0;
                this.blurTimeout = null;
                this.init();
            }
            
            init() {
                this.input.addEventListener('keydown', (e) => {
                    this.lastKeyTime = Date.now();
                    
                    if (e.key === 'Enter' || e.keyCode === 13) {
                        this.logEvent('keydown', 'æ£€æµ‹åˆ° Enter é”®æŒ‰ä¸‹');
                    }
                });
                
                this.input.addEventListener('blur', () => {
                    this.handleBlur();
                });
                
                this.input.addEventListener('focus', () => {
                    this.logEvent('focus', 'è·å¾—ç„¦ç‚¹');
                });
            }
            
            handleBlur() {
                const now = Date.now();
                const timeDiff = now - this.lastKeyTime;
                
                if (timeDiff < 300 && this.lastKeyTime > 0) {
                    this.logEvent('blur', `å¯èƒ½æ˜¯å®Œæˆé”®æ“ä½œ (${timeDiff}ms)`);
                    this.processCompletion();
                } else {
                    this.logEvent('blur', 'æ™®é€šå¤±å»ç„¦ç‚¹');
                }
                
                if (this.blurTimeout) {
                    clearTimeout(this.blurTimeout);
                }
                
                this.lastKeyTime = 0;
            }
            
            processCompletion() {
                const value = this.input.value.trim();
                if (value) {
                    this.logEvent('complete', `å¤„ç†å®Œæˆ: "${value}"`);
                }
            }
            
            logEvent(type, message) {
                const time = new Date().toLocaleTimeString();
                const entry = document.createElement('div');
                entry.className = 'log-entry';
                entry.innerHTML = `<strong>[${time}] ${type}:</strong> ${message}`;
                this.log.appendChild(entry);
                this.log.scrollTop = this.log.scrollHeight;
            }
        }
        
        // åˆå§‹åŒ–æ‰€æœ‰ç›‘å¬å™¨
        document.addEventListener('DOMContentLoaded', () => {
            // æ–¹æ³•1
            const method1 = new EnterKeyHintListener('inputDone', 'log1');
            
            // æ–¹æ³•2
            const method2 = new FormSubmitListener('demoForm', 'log2');
            
            // æ–¹æ³•3
            const method3 = new InputTypeListener('multilineInput', 'log3');
            
            // æ–¹æ³•4
            const method4 = new BlurDetector('blurInput', 'log4');
            
            updateStatus('æ‰€æœ‰ç›‘å¬å™¨å·²åˆå§‹åŒ–');
            
            // æ·»åŠ é”®ç›˜æ¨¡æ‹Ÿå™¨
            setupKeyboardSimulator();
        });
        
        // é”®ç›˜æ¨¡æ‹Ÿå™¨ï¼ˆæ¼”ç¤ºç”¨ï¼‰
        function setupKeyboardSimulator() {
            const keyboardHTML = `
                <div style="position: fixed; bottom: 0; left: 0; right: 0; background: #f0f0f0; border-top: 1px solid #ccc; padding: 10px; display: none;" id="keyboardSimulator">
                    <div style="display: grid; grid-template-columns: repeat(10, 1fr); gap: 5px; margin-bottom: 5px;">
                        ${'qwertyuiop'.split('').map(key => `<button style="padding: 10px; background: white; border: 1px solid #ddd;" class="keyboard-key">${key}</button>`).join('')}
                    </div>
                    <div style="display: grid; grid-template-columns: repeat(9, 1fr); gap: 5px; margin-bottom: 5px;">
                        ${'asdfghjkl'.split('').map(key => `<button style="padding: 10px; background: white; border: 1px solid #ddd;" class="keyboard-key">${key}</button>`).join('')}
                    </div>
                    <div style="display: flex; gap: 5px;">
                        <button style="flex: 2; padding: 10px; background: white; border: 1px solid #ddd;" id="enterKey">â†µ å®Œæˆ</button>
                        <button style="flex: 8; padding: 10px; background: white; border: 1px solid #ddd;" class="keyboard-key">ç©ºæ ¼</button>
                        <button style="flex: 1; padding: 10px; background: white; border: 1px solid #ddd;" id="hideKeyboard">éšè—</button>
                    </div>
                </div>
            `;
            
            document.body.insertAdjacentHTML('beforeend', keyboardHTML);
            
            const simulator = document.getElementById('keyboardSimulator');
            const enterKey = document.getElementById('enterKey');
            const hideBtn = document.getElementById('hideKeyboard');
            
            // å½“è¾“å…¥æ¡†è·å¾—ç„¦ç‚¹æ—¶æ˜¾ç¤ºé”®ç›˜
            document.querySelectorAll('input, textarea').forEach(input => {
                input.addEventListener('focus', () => {
                    simulator.style.display = 'block';
                });
                
                input.addEventListener('blur', () => {
                    // å»¶è¿Ÿéšè—ï¼Œé¿å…ç‚¹å‡»é”®ç›˜æŒ‰é’®æ—¶ç«‹å³éšè—
                    setTimeout(() => {
                        simulator.style.display = 'none';
                    }, 100);
                });
            });
            
            // é”®ç›˜æŒ‰é”®
            document.querySelectorAll('.keyboard-key').forEach(btn => {
                btn.addEventListener('click', () => {
                    const activeElement = document.activeElement;
                    if (activeElement && (activeElement.tagName === 'INPUT' || activeElement.tagName === 'TEXTAREA')) {
                        const start = activeElement.selectionStart;
                        const end = activeElement.selectionEnd;
                        const value = activeElement.value;
                        
                        activeElement.value = value.substring(0, start) + btn.textContent.trim() + value.substring(end);
                        activeElement.selectionStart = activeElement.selectionEnd = start + 1;
                        
                        // è§¦å‘ input äº‹ä»¶
                        const event = new Event('input', { bubbles: true });
                        activeElement.dispatchEvent(event);
                    }
                });
            });
            
            // å®Œæˆé”®
            enterKey.addEventListener('click', () => {
                const activeElement = document.activeElement;
                if (activeElement && (activeElement.tagName === 'INPUT' || activeElement.tagName === 'TEXTAREA')) {
                    // æ¨¡æ‹Ÿ Enter é”®æŒ‰ä¸‹
                    const enterEvent = new KeyboardEvent('keydown', {
                        key: 'Enter',
                        keyCode: 13,
                        bubbles: true
                    });
                    activeElement.dispatchEvent(enterEvent);
                    
                    // å¦‚æœæ˜¯è¡¨å•ï¼Œè§¦å‘ submit
                    if (activeElement.form) {
                        activeElement.form.dispatchEvent(new Event('submit', { cancelable: true }));
                    }
                    
                    // éšè—é”®ç›˜
                    simulator.style.display = 'none';
                    activeElement.blur();
                }
            });
            
            // éšè—é”®ç›˜æŒ‰é’®
            hideBtn.addEventListener('click', () => {
                simulator.style.display = 'none';
                const activeElement = document.activeElement;
                if (activeElement) {
                    activeElement.blur();
                }
            });
        }
    </script>
</body>
</html>